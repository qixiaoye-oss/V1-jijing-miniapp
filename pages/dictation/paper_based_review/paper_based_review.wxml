<import src="/templates/page-loading.wxml" />
<template is="pageLoading" data="{{loading, loadProgress}}" />
<skeleton type="list" loading="{{!_isDataReady}}" rows="{{5}}" />
<view class="page-content" wx:if="{{_isDataReady}}">
  <view wx:for="{{list}}" wx:key="id" class="question-card {{item.status === 2 ? 'question-card--wrong' : ''}}">
    <!-- 标题行：序号 + 纸笔答案 + 开关 -->
    <view class="question-header">
      <view class="question__no">{{index+1}}</view>
      <view class="question__title">纸笔答案</view>
      <switch checked="{{item.status === 2}}" bindchange="switchChange" data-index="{{index}}" color="#F92F60" style="zoom:.7;" />
    </view>

    <!-- 单词区域 -->
    <view class="word-section">
      <view class="word-content">
        <view class="flex_row">
          <view class="word_text" wx:for="{{item.answerArr}}" wx:key="*this" wx:for-item="answer">{{answer}}</view>
        </view>
        <view class="word_translate">{{item.chinese}}</view>
      </view>
      <view class="play-btn">
        <tap-action icon="play">
          <image src="/images/v2/pause_bt.png" wx:if="{{item.wordPlay === 'play'}}"></image>
          <image src="/images/v2/play_bt.png" wx:else bindtap="playWordAudio" data-index="{{index}}"></image>
        </tap-action>
      </view>
    </view>

    <!-- 例句区域 -->
    <view class="sentence-section">
      <view class="sentence-content">
        <view class="sentence_text">{{item.content}}</view>
        <view class="sentence_translate">{{item.parentChinese}}</view>
      </view>
      <view class="play-btn">
        <tap-action icon="play">
          <image src="/images/v2/pause_bt.png" wx:if="{{item.sentencePlay === 'play'}}"></image>
          <image src="/images/v2/play_bt.png" wx:else bindtap="playSentenceAudio" data-index="{{index}}"></image>
        </tap-action>
      </view>
    </view>
  </view>
</view>
<view class="btn-page-bottom" wx:if="{{_isDataReady}}">
  <view class="btn-group-single">
    <tap-action icon="save" bindtap="next">
      <view>完成并返回</view>
      <image src="/images/v2/save_bt.png"></image>
    </tap-action>
  </view>
</view>
